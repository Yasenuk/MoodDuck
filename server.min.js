// @ts-nocheck
const express=require("express"),path=require("path"),pool=require("./db"),app=express(),PORT=3e3;app.use(express.urlencoded({extended:!1})),app.use(express.json()),app.use(express.static("public")),app.get("/",((e,s)=>{s.sendFile(path.resolve(__dirname,"public","index.html"))})),app.post("/send-review",(async(e,s)=>{const{rating:p=5,name:a,phone:r,message:t,pluses:o,minuses:n="Поки не бачу"}=e.body,i=Math.floor(21*Math.random())+1;try{await pool.query("INSERT INTO reviews (username, rating, avatar_id, review_text, pros, cons, phone)\n       VALUES ($1, $2, $3, $4, $5, $6, $7)",[a,p,i,t,o,n,r]),s.status(200).json({success:!0,message:"Відгук збережено ❤️"})}catch(e){console.error(e),s.status(500).json({success:!1,error:"Щось пішло по дупі 😥"})}})),app.use(((e,s)=>{s.status(404).sendFile(path.resolve(__dirname,"public","404.html"))})),app.listen(3e3,(()=>{console.log("Сервер шпарить на http://localhost:3000")}));